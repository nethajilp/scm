"use strict";(self.webpackChunkraqamyah_scm=self.webpackChunkraqamyah_scm||[]).push([[325],{24325:(a,e,t)=>{t.r(e),t.d(e,{default:()=>I});var o=t(9950),l=t(10300),i=t(57073),n=t(4919),r=t(70146),s=t(57539),d=t(65257),p=t(111),m=t(45677),u=t(44781),c=t(55949);const g=a=>async e=>(e(v()),(0,u.a)({method:c.vX.post,url:c.s0.buyerGetLoansDetails,headers:c.b3.headFinancing,data:a}).then((a=>{if(void 0!==a){if(1==a.data.status||-1==a.data.status){let t=void 0!==a.data&&null!==a.data&&0!==Object.keys(a.data).length?a.data:{},o=null===t||void 0===t?void 0:t.data;o||(o=[]),e(f(o))}else e(v());return a}e(v())}))),v=()=>({type:m.Ny}),f=a=>({type:m.hj,payload:a});var h=t(28429),b=t(49045),y=t(4695),w=t.n(y),x=t(70367),T=t(980),j=t(42617),A=t(67818),R=t(1709),F=t(74635),S=t(44414);const D=localStorage.getItem("i18nextLng"),P=(0,r.A)("div")((a=>{let{theme:e}=a;return{margin:"30px",[e.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[e.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),C=((0,r.A)("div")((()=>({paddingLeft:"24px",paddingRight:"24px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"}))),()=>(0,T.A)({components:{MuiTableCell:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",padding:"15px",textAlign:"center",padding:"10px","&.MUIDataTable-paper":{boxShadow:"none !important"}},responsiveScroll:{overflow:"hidden"}}},MUIDataTableHeadCell:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",backgroundColor:"#37AA57 !important",textAlign:"center",color:"#fff","&.MUIDataTableHeadCell-sortActive":{color:"#fff !important"}},sortAction:{"& path":{color:"#fff !important"}},sortActive:{color:"#fff !important"},icon:{color:"#fff !important"},contentWrapper:{display:"flex !important",justifyContent:"center !important"}}},MuiPaper:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",boxShadow:"none !important"}}},MuiTablePagination:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",border:"none"},caption:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",fontSize:"8px"},selectLabel:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},select:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},displayedRows:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"}}},MUIDataTable:{styleOverrides:{root:{border:"none",color:"#fff",textAlign:"center",fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},responsiveBase:{overflow:"visible"},responsiveScroll:{position:"initial !important",maxHeight:"none !important"}}},MUIDataTableJumpToPage:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},select:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},caption:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"}}},MuiButtonBase:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},MuiMenuItem:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"}}},MuiIconButton:{styleOverrides:{root:{color:"#37A753"}}},MuiTypography:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",fontWeight:"bold",color:"#000"}}},MUIDataTablePagination:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",border:"none"},caption:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",fontSize:"8px"},selectLabel:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},displayedRows:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"},tableCellContainer:{borderBottom:"none"}}},MUIDataTableToolbar:{styleOverrides:{left:{webkitFlex:"none",flex:"none"},iconActive:{color:"#37A753","&:hover,&:focus":{color:"#37A753"}},icon:{"&:hover,&:focus":{color:"#37A753"}},actions:{textAlign:"ar"===D?"left":"right !important"},titleText:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important"}}},MuiTypography:{styleOverrides:{root:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",color:"#000",fontWeight:"bold"}}},MuiIcon:{styleOverrides:{root:{color:"#37A753","&:hover,&:focus":{color:"#37A753"}}}},MuiToolbar:{styleOverrides:{regular:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",minHeight:"8px"}}},MuiTooltip:{styleOverrides:{tooltip:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular"}}}}})),O=(0,p.A)((()=>({PageBreadcrumb:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",marginBottom:"30px"},PageTitle:{fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",fontSize:"20px",fontWeight:"bold"},PageTitleBox:{marginBottom:"30px"},StatusApproved:{height:15,width:50,color:"#138530",fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"bold"},StatusPending:{height:15,width:50,whiteSpace:"nowrap",color:"#dc9c02",fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",fontWeight:"bold"},StatusRejected:{height:15,width:50,color:"#ED7258",whiteSpace:"nowrap",fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",fontWeight:"bold"},StatusOngoing:{height:15,width:50,color:"#1E396C",fontFamily:"ar"===D?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",fontWeight:"bold"}})));function I(a){let{isFetching:e}=a;const t=O(),r=(0,h.Zp)(),{t:p}=(0,A.Bd)(),[m,u]=(0,o.useState)(!1),c=(0,l.wA)(),[v,f]=o.useState(10),[y,T]=o.useState(0),[I,B]=(0,o.useState)([]),[M,L]=(0,o.useState)([]),k=(0,h.zy)(),N=JSON.parse(b.A.getItem("userPrivilege")),{status:W}=k.state?k.state:"null",U=b.A.getItem("nafath"),z=a=>{u(!0);const e=b.A.getItem("buyerId"),t=b.A.getItem("type");c(g({buyerId:e,type:t,loanStatus:a,lang:"ar"===D?"ar":"en"})).then((a=>{var e,t,o;B(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.reverse()),L(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.data)}))};(0,o.useEffect)((()=>{var a;return"0"===U||"0"===(null===N||void 0===N||null===(a=N.Loan)||void 0===a?void 0:a.view)?(w().fire({text:"ar"==D?"\u0644\u0627\u064a\u0648\u062c\u062f \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u062f\u062e\u0648\u0644 \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629":"You dont have access to this page",icon:"error",confirmButtonText:"ar"==D?"\u062d\u0633\u0646\u0627":"Okay"}),void r("/buyer/dashboard")):void((null===W||void 0===W?void 0:W.length)>0?z(W):z(""))}),[]);let H=(0,l.d4)((a=>{var e;return null===(e=a.buyerLoanTableReducer)||void 0===e?void 0:e.isFetching}));const V=[{name:"#",label:null!==D&&void 0!==D&&D.includes("en")?"S.No":"\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644",options:{download:!1,filter:!1,sort:!1,customBodyRender:(a,e)=>e.rowIndex+1}},{name:"loanNumber",label:null!==D&&void 0!==D&&D.includes("en")?"Invoice Number":"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",options:{filter:!0,sort:!1}},{name:"loanAmount",label:null!==D&&void 0!==D&&D.includes("en")?"Finance Amount":"\u0645\u0628\u0644\u063a \u0627\u0644\u062a\u0645\u0648\u064a\u0644",options:{filter:!0,sort:!1,customBodyRender:(a,e,t)=>(a=>{const e=null===a||void 0===a?void 0:a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),t=null===e||void 0===e?void 0:e.indexOf("."),o=null===e||void 0===e?void 0:e.substring(0,t),l=null===e||void 0===e?void 0:e.substring(t+1);let i=" SAR "+o;return"00"!==l&&(i+="."+(null===l||void 0===l?void 0:l.replace(/0+$/,""))),i})(e.rowData[2])}},{name:"loanStatus",label:null!==D&&void 0!==D&&D.includes("en")?"Finance Status":"\u062d\u0627\u0644\u0629 \u0627\u0644\u062a\u0645\u0648\u064a\u0644",options:{filter:!0,sort:!1,customBodyRender:(a,e,o)=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:"Ongoing"==e.rowData[3]&&(0,S.jsx)("span",{className:t.StatusApproved,children:p("Buyer Loan Table Status Ongoin")})}),(0,S.jsx)("p",{children:"Pending"==e.rowData[3]&&(0,S.jsx)("span",{className:t.StatusPending,children:p("Loan Details Status Pending")})}),(0,S.jsx)("p",{children:"Completed"==e.rowData[3]&&(0,S.jsx)("span",{className:t.StatusOngoing,children:p("Buyer Loan Table Status Completed")})}),(0,S.jsx)("p",{children:"Rejected"==e.rowData[3]&&(0,S.jsx)("span",{className:t.StatusRejected,children:p("Loan Details Status Rejected")})})]})}},{name:"intrestRate",label:null!==D&&void 0!==D&&D.includes("en")?"Interest Rate (%)":"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d (%)",options:{filter:!0,sort:!1,customBodyRender:(a,e,t)=>(a=>{const e=null===a||void 0===a?void 0:a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),t=null===e||void 0===e?void 0:e.indexOf("."),o=null===e||void 0===e?void 0:e.substring(0,t),l=null===e||void 0===e?void 0:e.substring(t+1);let i=o;return"00"!==l&&(i+="."+(null===l||void 0===l?void 0:l.replace(/0+$/,""))),i})(e.rowData[4])}},{name:"interestPeriod",label:null!==D&&void 0!==D&&D.includes("en")?"Finance Period (days)":"\u0641\u062a\u0631\u0629 \u0627\u0644\u062a\u0645\u0648\u064a\u0644 (\u064a\u0648\u0645)",options:{filter:!0,sort:!1}},{name:"invoiceId",label:(0,S.jsx)(d.L9,{children:p("Buyer Loan Table Action")}),options:{filter:!1,sort:!1,download:!1,customBodyRender:(a,e,t)=>(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(i.A,{onClick:()=>(b.A.setItem("invoiceId",e.rowData[6]),void r("/buyer/InvoiceMoreDetails/",{state:{path:window.location.pathname}})),children:(0,S.jsx)(n.A,{color:"primary",children:"visibility"})})})}}],E={selectableRows:!1,filterType:"dropdown",rowsPerPage:[10],rowsPerPageOptions:[5,10,15,(null===I||void 0===I?void 0:I.length)>15&&(null===I||void 0===I?void 0:I.length)],jumpToPage:!0,responsive:"scroll",display:!0,resizableColumns:!1,filterOptions:{title:"test"},onColumnSortChange:(a,e)=>{let t="desc";"ascending"===e&&(t="asc"),this.sortChange(a,t)},downloadOptions:{filename:"Loan Table.csv"},draggableColumns:{enabled:!1},onDownload:(a,e,t,o)=>"\ufeff"+a(t)+e(o),textLabels:{pagination:{jumpToPage:(0,S.jsx)("p",{children:p("Data Table Pagination Jump To Page")}),next:"Next >",previous:"< Previous",rowsPerPage:(0,S.jsx)("p",{children:p("Data Table Pagination Total items Per Page")}),displayRows:"ar"===F.Ay.language?"\u0644":"of"},toolbar:{search:(0,S.jsx)("p",{children:p("Data Table Search")}),downloadCsv:"ar"===F.Ay.language?"\u062a\u0646\u0632\u064a\u0644 \u0645\u0644\u0641 CSV":"Download CSV",print:(0,S.jsx)("p",{children:p("Data Table Print")}),viewColumns:(0,S.jsx)("p",{children:p("Data Table ViewColumns")}),filterTable:(0,S.jsx)("p",{children:p("Data Table FilterTable")})},filter:{all:(0,S.jsx)("p",{children:p("Data Table All")}),title:(0,S.jsx)("p",{children:p("Data Table Filters")}),reset:(0,S.jsx)("p",{children:p("Data Table Resets")})},viewColumns:{title:(0,S.jsx)("p",{children:p("Data Table Show Columns")}),titleAria:(0,S.jsx)("p",{children:p("Data Table ViewColumns TitleAria")})},body:{noMatch:(0,S.jsx)("p",{children:p("Data Table noMatch")}),toolTip:(0,S.jsx)("p",{children:p("Data Table toolTip")})}}};return(0,S.jsxs)(P,{children:[(0,S.jsx)("div",{className:"breadcrumb",children:(0,S.jsx)(s.Qp,{routeSegments:[{name:(0,S.jsx)("p",{children:p("Buyer Loan Table Title")})}]})}),(0,S.jsx)(s.Tn,{children:H?(0,S.jsx)(R.A,{}):(0,S.jsx)(j.A,{theme:C(),children:(0,S.jsx)(x.Ay,{title:p("Buyer Loan Table Title"),data:I,columns:V,options:E})})})]})}}}]);