"use strict";(self.webpackChunkraqamyah_scm=self.webpackChunkraqamyah_scm||[]).push([[423],{84641:(e,a,t)=>{t.d(a,{OP:()=>o});var n=t(45677),l=t(44781),i=t(55949);const o=e=>async a=>(a(r()),(0,l.a)({method:i.vX.post,url:i.s0.buyerLoansDataDetails,headers:i.b3.headFinancing,data:e}).then((e=>{if(void 0!==e){if(1==e.data.status||-1==e.data.status){let t=void 0!==e.data&&null!==e.data&&0!==Object.keys(e.data).length?e.data:{};a(s(null===t||void 0===t?void 0:t.data))}else a(r());return e}a(r())}))),r=()=>({type:n.pI}),s=e=>({type:n.$s,payload:e})},65423:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ge});var n=t(14341),l=t(72145),i=t(46639),o=t(57073),r=t(4919),s=t(37598),d=t(63464),c=t(40033),u=t(28170),p=t(6493),m=t(4139),v=t(66059),x=t(88164),h=t(27987),g=t(2046),y=t(79739),j=t(87233),A=t(980),b=t(42617),f=t(39287),w=t(111),S=t(70146),I=t(86898),D=t(7148),T=t(1709),P=t(45677),F=t(44781),B=t(55949);const R=e=>async a=>(a(N()),(0,F.a)({method:B.vX.post,url:B.s0.buyerGetInvoice,headers:B.b3.headFinancing,data:e}).then((e=>{if(void 0!==e){if(1==e.data.status||-1==e.data.status){let t=void 0!==e.data&&null!==e.data&&0!==Object.keys(e.data).length?e.data:{},n=null===t||void 0===t?void 0:t.data;n||(n=[]),a(C(n))}else a(N());return e}a(N())}))),N=()=>({type:P.cl}),C=e=>({type:P.uP,payload:e});var L=t(74635),O=t(70367),M=t(9950),k=t(36275),z=t(67818),Y=t(10300),E=t(28429),W=t(49045),K=t(4695),U=t.n(K),V=t(57539),q=t(58510);const H=e=>{const a=new FormData;return a.append("type",e.type),a.append("invoiceFile",e.invoiceFile),a.append("signedbuyerId",e.signedbuyerId),a.append("invoiceNo",e.invoiceNumber),a.append("buyerId",e.buyerId),a.append("loanPeriod",e.loanPeriod),a.append("finAmtRate",e.finAmtRate),a.append("invoiceAmount",e.invoiceAmount),a.append("lang",e.lang),a.append("deliveryNotes",e.deliveryNotes),a.append("goodsDelivered",e.goodsDelivered),async e=>(e(J()),(0,F.a)({method:B.vX.post,url:B.s0.BuyerSoloInvoiceUpload,headers:B.b3.headFinancing,data:a}).then((a=>{if(void 0!=a){if(1==a.data.status||-1==a.data.status){let t=void 0!=a.data&&null!=a.data&&0!=Object.keys(a.data).length?a.data:{};e(X(t))}else e($());return a}e($())})))},J=()=>({type:P.Jl}),X=e=>({type:P.Fu,payload:e}),$=e=>({type:P.fY,payload:e});var _=t(81831),G=t(95359),Q=t(41650),Z=t(93230),ee=t(84641),ae=t(59051),te=t.n(ae);const ne=e=>async a=>(a(le()),(0,F.a)({method:B.vX.post,url:B.s0.buyerInvoiceCalculationFinancialDateails,headers:B.b3.headFinancing,data:e}).then((e=>{if(void 0!==e){if(1==e.data.status||-1==e.data.status){let t=void 0!==e.data&&null!==e.data&&0!==Object.keys(e.data).length?e.data:{},n=null===t||void 0===t?void 0:t.data;n||(n=[]),a(ie(n))}else a(le());return e}a(le())}))),le=()=>({type:P.Rd}),ie=e=>({type:P.D7,payload:e});var oe=t(44414);const re=localStorage.getItem("i18nextLng"),se=(0,S.A)("div")((e=>{let{theme:a}=e;return{margin:"30px",[a.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[a.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),de=(0,f.A)({root:{"& label":{transformOrigin:"ar"===re?"top right":"none",right:"ar"===re?28:"auto",left:"ar"===re?"auto":0,fontFamily:"ar"===re?"Tajawal":"Ample-Regular"},"& legend":{textAlign:"ar"===re?"right":"left"}}})(n.A),ce=(0,S.A)(I.A)((()=>({display:"flex",alignItems:"center"}))),ue=(0,f.A)({root:{"& label":{transformOrigin:"ar"===re?"top right":"none",right:"ar"===re?28:"auto",left:"ar"===re?"auto":0,fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",color:"inherit"},"& legend":{textAlign:"ar"===re?"right":"left",fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},"& inputfomate":{textAlign:"ar"===re?"right":"left"}}})(l.A),pe=(0,S.A)("div")((()=>({paddingLeft:"24px",paddingRight:"24px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"}))),me=(0,S.A)(i.A)((()=>({position:"absolute",top:"6px",left:"50%",right:"50%"}))),ve=(0,S.A)(ce)((e=>{let{isDragActive:a,theme:t}=e;return{width:"100%",height:160,cursor:"pointer",marginBottom:"16px",borderRadius:"4px",justifyContent:"center",transition:"all 350ms ease-in-out",border:"2px dashed rgba(".concat((0,q.zs)(t.palette.text.primary),", 0.3)"),"&:hover":{background:"rgb(".concat((0,q.zs)(t.palette.text.primary),", 0.2) !important")},background:a?"rgb(0, 0, 0, 0.15)":"rgb(0, 0, 0, 0.01)"}})),xe=()=>(0,A.A)({components:{MuiTableCell:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",padding:"15px",textAlign:"center",padding:"10px","&.MUIDataTable-paper":{boxShadow:"none !important"}},responsiveScroll:{overflow:"hidden"}}},Mui:{styleOverrides:{root:{}},error:{color:"inherit !important"}},MuiFormLabel:{styleOverrides:{root:{color:"inherit !important",MuiInputLabel:{styleOverrides:{root:{color:"inherit !important"}}}}}},MUIDataTableHeadCell:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",backgroundColor:"#37AA57 !important",textAlign:"center",color:"#fff",fontWeight:"bold","&.MUIDataTableHeadCell-sortActive":{color:"#fff !important"}},sortAction:{"& path":{color:"#fff !important"}},sortActive:{color:"#fff !important"},icon:{color:"#fff !important"},contentWrapper:{display:"flex !important",justifyContent:"center !important"}}},MuiPaper:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",boxShadow:"none !important"}}},MuiTablePagination:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",border:"none"},caption:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",fontSize:"8px"},selectLabel:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},select:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},displayedRows:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"}}},MUIDataTable:{styleOverrides:{root:{border:"none",color:"#fff",textAlign:"center",fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},responsiveBase:{overflow:"visible"},responsiveScroll:{position:"initial !important",maxHeight:"none !important"}}},MUIDataTableJumpToPage:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},select:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},caption:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"}}},MuiButtonBase:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},MuiMenuItem:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"}}},MuiIconButton:{styleOverrides:{root:{color:"#37A753"}}},MuiTypography:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",fontWeight:"bold",color:"#000"}}},MUIDataTablePagination:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",border:"none"},caption:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",fontSize:"8px"},selectLabel:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},displayedRows:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"},tableCellContainer:{borderBottom:"none"}}},MUIDataTableToolbar:{styleOverrides:{left:{webkitFlex:"none",flex:"none"},iconActive:{color:"#37A753","&:hover,&:focus":{color:"#37A753"}},icon:{"&:hover,&:focus":{color:"#37A753"}},actions:{textAlign:"ar"===re?"left":"right !important"},titleText:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important"}}},MuiTypography:{styleOverrides:{root:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",color:"#000",fontWeight:"bold"}}},MuiIcon:{styleOverrides:{root:{color:"#37A753","&:hover,&:focus":{color:"#37A753"}}}},MuiToolbar:{styleOverrides:{regular:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",minHeight:"8px"}}},MuiTooltip:{styleOverrides:{tooltip:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular"}}},MuiPickersCalendarHeader:{styleOverrides:{root:{direction:"ar"===re?"ltr":"rtl !important"}}}}}),he=(0,w.A)((()=>({PageBreadcrumb:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",marginBottom:"30px"},PageTitle:{fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",fontSize:"20px",fontWeight:"bold"},BodyTextLabel:{fontSize:"16px",fontFamily:"ar"===re?"Tajawal":"Ample-Regular",fontWeight:"bold",color:"#696969"},BodyTextLabelKey:{fontSize:"15px",color:"#696969",fontFamily:"ar"===re?"Tajawal":"Ample-Regular"},PageTitleBox:{marginBottom:"30px"},StatusApproved:{height:15,width:50,color:"#138530",fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"bold"},StatusPending:{height:15,width:50,whiteSpace:"nowrap",color:"#dc9c02",fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",fontWeight:"bold"},StatusRejected:{height:15,width:50,color:"#ED7258",whiteSpace:"nowrap",fontFamily:"ar"===re?"Tajawal":"Ample-Regular !important",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",fontWeight:"bold"},modalTitle:{color:"#fff"}})));function ge(e){let{isFetching:a,header:t}=e;const{t:l}=(0,z.Bd)(),{palette:i}=(0,D.A)(),A=(0,E.Zp)(),f=(0,E.zy)(),{status:w}=f.state?f.state:"null",[S,P]=(0,M.useState)(!1),F=he(),[B,N]=(0,M.useState)(!1),[C,K]=(0,M.useState)(""),[q,J]=(0,M.useState)(""),X=(0,Y.wA)(),[$,ae]=M.useState(10),[le,ie]=M.useState(0);(0,Y.d4)((e=>{var a;return null===(a=e.buyerInvoiceTableReducer)||void 0===a?void 0:a.invoiceTableList}));const[ge,ye]=(0,M.useState)([]),[je,Ae]=(0,M.useState)([]),be=JSON.parse(W.A.getItem("userPrivilege")),[fe,we]=(0,M.useState)("Yes"),[Se,Ie]=(0,M.useState)(""),[De,Te]=(0,M.useState)(""),Pe=W.A.getItem("nafath"),Fe=W.A.getItem("buyerType"),[Be,Re]=M.useState(!1),[Ne,Ce]=(0,M.useState)(""),[Le,Oe]=(0,M.useState)(""),[Me,ke]=(0,M.useState)(!1),[ze,Ye]=(0,M.useState)(!1),[Ee,We]=(0,M.useState)(),[Ke,Ue]=(0,M.useState)(!1),[Ve,qe]=(0,M.useState)(),[He,Je]=(0,M.useState)(null),[Xe,$e]=(0,M.useState)(),[_e,Ge]=(0,M.useState)(),[Qe,Ze]=(0,M.useState)(),[ea,aa]=(0,M.useState)(),[ta,na]=(0,M.useState)(),[la,ia]=(0,M.useState)(0),[oa,ra]=(0,M.useState)(0),[sa,da]=(0,M.useState)(""),[ca,ua]=(0,M.useState)(""),[pa,ma]=(0,M.useState)(""),[va,xa]=(0,M.useState)(""),[ha,ga]=(0,M.useState)(""),[ya,ja]=(0,M.useState)(""),[Aa,ba]=(0,M.useState)(""),[fa,wa]=(0,M.useState)(""),[Sa,Ia]=(0,M.useState)(""),[Da,Ta]=(0,M.useState)(""),Pa=30*Qe,Fa=e=>{e.preventDefault()},Ba=te()(ta),Ra=te()(ea),Na=e=>e<Ra?(We("ar"===L.Ay.language?"\u0623\u064a\u0627\u0645 \u0628\u0639\u064a\u062f\u0627 ".concat(Pa," \u064a\u062c\u0628 \u0623\u0644\u0627 \u064a\u0632\u064a\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0639\u0646"):"The invoice date should not be more than ".concat(Pa," days away.")),Ue(!0),void qe(500)):e>Ba?(We("ar"===L.Ay.language?"\u0644\u064a\u0633 \u0645\u0646 \u0627\u0644\u0645\u0645\u0643\u0646 \u062a\u062d\u062f\u064a\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644\u064a\u0629":"It is not possible to select a future billing date"),Ue(!0),void qe(500)):void 0,{getRootProps:Ca,getInputProps:La,isDragActive:Oa,acceptedFiles:Ma,acceptedOneFiles:ka}=(0,k.VB)({multiple:!1,maxSize:1048576,accept:{"application/pdf":[]}}),{getRootProps:za,getInputProps:Ya,acceptedFile:Ea}=(0,k.VB)({accept:{"application/pdf":[]},onDropAccepted:e=>{Ie(e)}}),{getRootProps:Wa,getInputProps:Ka}=(0,k.VB)({accept:{"application/pdf":[]},onDropAccepted:e=>{Te(e)}});function Ua(){Re(!1),ia(0),K(""),Ie(""),J(""),Je(null),Te(""),Ce(),Oe(),we("Yes"),ra(),da(),xa(),Ta(),ua(),ma(),ga(),ja(),ba(),wa(),Ia()}const Va=e=>{const a=null===e||void 0===e?void 0:e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),t=null===a||void 0===a?void 0:a.indexOf("."),n=null===a||void 0===a?void 0:a.substring(0,t),l=null===a||void 0===a?void 0:a.substring(t+1);let i=" SAR "+n;return"00"!==l&&(i+="."+(null===l||void 0===l?void 0:l.replace(/0+$/,""))),i},qa=e=>{N(!0);const a=W.A.getItem("buyerId"),t=W.A.getItem("type");X(R({buyerId:a,type:t,invoiceStatus:e,loanStatus:"",lang:"ar"===re?"ar":"en"})).then((e=>{var a,t,n,l;N(!1),ye(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.reverse()),Ae(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.invoiceId)}))};(0,M.useEffect)((()=>{var e;return"Buyer Solo"===Fe&&Ha(),"0"===Pe||"0"===(null===be||void 0===be||null===(e=be.Invoice)||void 0===e?void 0:e.view)?(U().fire({text:"ar"==re?"\u0644\u0627\u064a\u0648\u062c\u062f \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u062f\u062e\u0648\u0644 \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629":"You dont have access to this page",icon:"error",confirmButtonText:"ar"==re?"\u062d\u0633\u0646\u0627":"Okay"}),void A("/buyer/dashboard")):void((null===w||void 0===w?void 0:w.length)>0?qa(w):qa(""))}),[]);const Ha=e=>{N(!0);const a={buyerId:W.A.getItem("buyerId"),type:W.A.getItem("type")};X((0,ee.OP)(a)).then((e=>{var a,t,n,l,i,o,r,s,d,c;Ze(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.invoiceAge),$e(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.finAmtRate),na(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.invoiceAgeEnd),aa(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.invoiceAgeStart),Ge(null===e||void 0===e||null===(d=e.data)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.loanPeriodRange),W.A.setItem("loanDataID",e.data.loanDataID)}))},Ja=(0,Y.d4)((e=>{var a;return null===(a=e.buyerInvoiceTableReducer)||void 0===a?void 0:a.isFetching})),Xa=[{name:"S.no",label:null!==re&&void 0!==re&&re.includes("en")?"S.No":"\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644",options:{filter:!1,sort:!1,download:!1,customBodyRender:(e,a)=>a.rowIndex+1}},{name:"invoiceNo",label:null!==re&&void 0!==re&&re.includes("en")?"Invoice No":"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",options:{filter:!0,sort:!1}},{name:"sellerCompanyName",label:null!==re&&void 0!==re&&re.includes("en")?"Company Name":"\u0625\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629",options:{display:"Buyer Solo"!==Fe,filter:"Buyer Solo"!==Fe,sort:"Buyer Solo"!==Fe,viewColumns:"Buyer Solo"!==Fe,download:"Buyer Solo"!==Fe}},{name:"sellerEmail",label:null!==re&&void 0!==re&&re.includes("en")?"Email":"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",options:{display:"Buyer Solo"!==Fe,filter:"Buyer Solo"!==Fe,sort:"Buyer Solo"!==Fe,viewColumns:"Buyer Solo"!==Fe,download:"Buyer Solo"!==Fe}},{name:"invoiceStatus",label:null!==re&&void 0!==re&&re.includes("en")?"Invoice Status":"\u062d\u0627\u0644\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",options:{filter:!0,sort:!1,width:"500px",customBodyRender:(e,a,t)=>(0,oe.jsxs)(oe.Fragment,{children:["Buyer Solo"!==Fe&&(0,oe.jsxs)(oe.Fragment,{children:[a.rowData[7]>0&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("p",{children:"Approved"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusApproved,children:l("Invoice Approved by Buyer")})}),(0,oe.jsx)("p",{children:"Pending"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Funding"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Funding completed"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Rejected"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Rejected by Buyer")})}),(0,oe.jsx)("p",{children:"Expired"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Page Status Expired")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"1"==a.rowData[9]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"0"==a.rowData[9]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})})]}),null===a.rowData[7]&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("p",{children:"Approved"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusApproved,children:l("Invoice Approved by Buyer")})}),(0,oe.jsx)("p",{children:"Funding"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Funding completed"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Rejected"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Rejected by seller")})}),(0,oe.jsx)("p",{children:"Expired"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Page Status Expired")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"1"==a.rowData[9]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"0"==a.rowData[9]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})})]})]}),(0,oe.jsx)(oe.Fragment,{children:"Buyer Solo"===Fe&&(0,oe.jsxs)(oe.Fragment,{children:[a.rowData[7]>0&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("p",{children:"Approved"==a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusApproved,children:l("Invoice Approved by Buyer")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"0"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Funding"===a.rowData[4]&&"0"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Funding completed"===a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Rejected"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Rejected by Buyer")})}),(0,oe.jsx)("p",{children:"Expired"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Page Status Expired")})})]}),null===a.rowData[7]&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("p",{children:"Approved"===a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusApproved,children:l("Invoice Approved by Buyer")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"0"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Pending"===a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Funding"===a.rowData[4]&&"0"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Loan Details Status Pending")})}),(0,oe.jsx)("p",{children:"Funding completed"===a.rowData[4]&&"1"==a.rowData[8]&&(0,oe.jsx)("span",{className:F.StatusPending,children:l("Invoice Pending by Buyer")})}),(0,oe.jsx)("p",{children:"Rejected"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Rejected by seller")})}),(0,oe.jsx)("p",{children:"Expired"==a.rowData[4]&&(0,oe.jsx)("span",{className:F.StatusRejected,children:l("Invoice Page Status Expired")})})]})]})})]})}},{name:"invoiceAmount",label:null!==re&&void 0!==re&&re.includes("en")?"Invoice Amount(SAR)":"\u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",options:{filter:!0,sort:!1,download:!0,customBodyRender:(e,a,t)=>(0,oe.jsx)("p",{children:Va(a.rowData[5])})}},{name:"invoiceId",label:null!==re&&void 0!==re&&re.includes("en")?"Action":"\u062a\u0641\u0627\u0635\u064a\u0644",options:{filter:!1,sort:!1,download:!1,customBodyRender:(e,a,t)=>(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(o.A,{onClick:()=>(W.A.setItem("invoiceId",a.rowData[6]),void A("/buyer/InvoiceMoreDetails/",{state:{path:window.location.pathname}})),children:(0,oe.jsx)(r.A,{color:"primary",children:"visibility"})})})}},{name:"buyerSignId",options:{filter:!1,sort:!1,display:!1,download:!1,column:!1,viewColumns:!1}},{name:"isVerified",options:{filter:!1,sort:!1,display:!1,download:!1,column:!1,viewColumns:!1}},{name:"isAccepted",options:{filter:!1,sort:!1,display:!1,download:!1,column:!1,viewColumns:!1}}],$a={selectableRows:!1,filterType:"dropdown",rowsPerPage:[10],rowsPerPageOptions:[5,10,15,(null===ge||void 0===ge?void 0:ge.length)>15&&(null===ge||void 0===ge?void 0:ge.length)],jumpToPage:!0,responsive:"scroll",display:!0,resizableColumns:!1,filterOptions:{title:"test"},onColumnSortChange:(e,a)=>{let t="desc";"ascending"===a&&(t="asc"),this.sortChange(e,t)},downloadOptions:{filename:"Invoice Table.csv"},draggableColumns:{enabled:!1},onDownload:(e,a,t,n)=>"\ufeff"+e(t)+a(n),textLabels:{pagination:{jumpToPage:(0,oe.jsx)("p",{children:l("Data Table Pagination Jump To Page")}),next:"Next >",previous:"< Previous",rowsPerPage:(0,oe.jsx)("p",{children:l("Data Table Pagination Total items Per Page")}),displayRows:"ar"===L.Ay.language?"\u0644":"of"},toolbar:{search:(0,oe.jsx)("p",{children:l("Data Table Search")}),downloadCsv:"ar"===L.Ay.language?"\u062a\u0646\u0632\u064a\u0644 \u0645\u0644\u0641 CSV":"Download CSV",print:(0,oe.jsx)("p",{children:l("Data Table Print")}),viewColumns:(0,oe.jsx)("p",{children:l("Data Table ViewColumns")}),filterTable:(0,oe.jsx)("p",{children:l("Data Table FilterTable")})},filter:{all:(0,oe.jsx)("p",{children:l("Data Table All")}),title:(0,oe.jsx)("p",{children:l("Data Table Filters")}),reset:(0,oe.jsx)("p",{children:l("Data Table Resets")})},viewColumns:{title:(0,oe.jsx)("p",{children:l("Data Table Show Columns")}),titleAria:(0,oe.jsx)("p",{children:l("Data Table ViewColumns TitleAria")})},body:{noMatch:(0,oe.jsx)("p",{children:l("Data Table noMatch")}),toolTip:(0,oe.jsx)("p",{children:l("Data Table toolTip")})}}},_a=()=>{ke(!1)},Ga=()=>{ke(!0)};return(0,oe.jsxs)(se,{children:[(0,oe.jsx)("div",{className:"breadcrumb",children:(0,oe.jsx)(V.Qp,{routeSegments:[{name:(0,oe.jsx)("p",{children:l("Buyer Invoice Page Title")})}]})}),(0,oe.jsx)(V.qo,{status:Ve,visible:Ke,setResponse:Ue,message:Ee,setResponseStatus:qe,setResponseMessage:We}),(0,oe.jsx)(V.KK,{open:Me,onConfirmDialogClose:_a,onYesClick:()=>{const e=W.A.getItem("buyerId"),a=W.A.getItem("type"),t=W.A.getItem("userId"),n={type:a,invoiceFile:Se[0],buyerId:e,invoiceNumber:C,signedbuyerId:t,loanPeriod:Ne,finAmtRate:Le,invoiceAmount:parseFloat(q.replace(/,/g,"")),lang:null!==re&&void 0!==re&&re.includes("en")?"en":"ar",goodsDelivered:1,deliveryNotes:De[0]};P(!0),X(H(n)).then((e=>{var a;null===e||void 0===e||null===(a=e.data)||void 0===a||a.status,We(null===e||void 0===e?void 0:e.data.message),qe(null===e||void 0===e?void 0:e.data.status),Ue(!0),qa({invoiceStatus:""}),Ua(),Ie(""),K(""),J(""),Je(null),Te(""),we("Yes"),P(!1)})).catch((e=>{P(!1),We(null===e||void 0===e?void 0:e.data.message),qe(null===e||void 0===e?void 0:e.data.status)})),_a()},text:l("Are you sure to Send the Invoice")}),(0,oe.jsxs)(V.Tn,{children:[Ja?(0,oe.jsx)(T.A,{}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)(pe,{className:F.PageTitleBox,children:[(0,oe.jsx)(I.A,{ml:"12px"}),"Buyer Solo"===Fe&&(0,oe.jsx)(I.A,{sx:{display:"flex"},children:(0,oe.jsx)(s.A,{variant:"contained",color:"primary",disabled:"1"!==be.Invoice.edit,onClick:function(){Re(!0)},sx:{ml:5},children:l("BuyerSoloUploadInvoice")})})]}),(0,oe.jsx)(b.A,{theme:xe(),children:(0,oe.jsx)(O.Ay,{title:l("Buyer Invoice Title"),data:ge,columns:Xa,options:$a,setColumnProperties:(e,a)=>{var t;return{style:{width:null===(t=e.options)||void 0===t?void 0:t.width}}}})})]}),(0,oe.jsxs)(d.A,{open:Be,onClose:Ua,children:["0"==la&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(I.A,{sx:{bgcolor:"#37AA57"},children:(0,oe.jsx)(c.A,{className:F.modalTitle,children:l("BuyerSoloUploadInvoice")})}),(0,oe.jsx)(u.A,{children:(0,oe.jsx)(p.A,{id:"alert-dialog-description",children:(0,oe.jsx)(I.A,{className:F.Box,p:2,height:"100%",children:(0,oe.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,oe.jsx)(m.Ay,{item:!0,xs:12,children:(0,oe.jsx)(de,{required:!0,fullWidth:!0,label:l("Send Invoice Invoice Number"),type:"text",autoComplete:"off",value:C,onChange:e=>{K(e.target.value)},name:"invoiceNumber",inputProps:{maxLength:8},className:F.textField,InputProps:{className:F.input},InputLabelProps:{classes:{root:F.cssLabel,focused:F.cssFocused}}})}),(0,oe.jsx)(m.Ay,{item:!0,xs:12,children:(0,oe.jsx)(de,{required:!0,fullWidth:!0,label:l("Send Invoice Invoice Amount"),type:"text",autoComplete:"off",value:q,inputProps:{maxLength:10},onChange:e=>(e=>{if(""==e)J();else{let a=e.toString().split(".");a[0]=a[0].toString().replace(/[^0-9]/g,"").toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),J(a.join("."))}})(e.target.value),name:"invoiceAmount",className:F.textField,InputProps:{className:F.input},InputLabelProps:{classes:{root:F.cssLabel,focused:F.cssFocused}}})}),(0,oe.jsx)(m.Ay,{item:!0,xs:12,children:(0,oe.jsxs)(ue,{fullWidth:!0,children:[(0,oe.jsx)(v.A,{className:F.textField,id:"demo-simple-select-label",children:l("BuyerSoloLoanDeductionRate")}),(0,oe.jsx)(x.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"buyerName",autoComplete:"off",label:l("BuyerSoloLoanDeductionRate"),value:Le,onChange:e=>{Oe(e.target.value)},children:null===Xe||void 0===Xe?void 0:Xe.map(((e,a)=>(0,oe.jsx)(h.A,{value:e,children:e},a)))})]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:12,children:(0,oe.jsxs)(ue,{fullWidth:!0,children:[(0,oe.jsx)(v.A,{className:F.textField,id:"demo-simple-select-label",children:l("BuyerSoloLoanPeriod")}),(0,oe.jsx)(x.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"loanPeriod",autoComplete:"off",label:l("BuyerSoloLoanPeriod"),value:Ne,onChange:e=>{Ce(e.target.value)},children:null===_e||void 0===_e?void 0:_e.map(((e,a)=>(0,oe.jsx)(h.A,{value:e,children:e},a)))})]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:12,children:(0,oe.jsx)(_.$,{dateAdapter:G.R,children:(0,oe.jsx)(Z.A,{children:(0,oe.jsx)(ue,{children:(0,oe.jsx)(Q.T,{label:l("Invoice Date"),inputFormat:"DD-MM-YYYY",value:He,onChange:e=>(e=>{Je(e),Na(e)})(e),renderInput:e=>(0,oe.jsx)(n.A,{onKeyDown:Fa,lable:l("DD-MM-YYYY"),InputProps:{inputProps:{style:{textAlign:"right"}},startAdornment:(0,oe.jsx)(g.A,{position:"start",children:"\ud83d\udcc5"})},...e})})})})})}),(0,oe.jsx)(m.Ay,{item:!0,md:6,xs:12,children:(0,oe.jsxs)(ve,{...za(),children:[(0,oe.jsx)("input",{...Ya()}),(0,oe.jsxs)(ce,{flexDirection:"column",children:[(0,oe.jsx)(r.A,{sx:{fontSize:"48px"},children:"publish"}),null!==Se&&void 0!==Se&&Se.length?(0,oe.jsxs)("span",{children:[null===Se||void 0===Se?void 0:Se.length,l("File were selected")]}):(0,oe.jsxs)("span",{children:[l("Drop Your File")," ",l("Send Invoice Invoice File")]})]})]})}),(0,oe.jsx)(m.Ay,{item:!0,md:6,xs:12,children:(0,oe.jsxs)(ve,{...Wa(),children:[(0,oe.jsx)("input",{...Ka()}),(0,oe.jsxs)(ce,{flexDirection:"column",children:[(0,oe.jsx)(r.A,{sx:{fontSize:"48px"},children:"publish"}),null!==De&&void 0!==De&&De.length?(0,oe.jsxs)("span",{children:[null===De||void 0===De?void 0:De.length,l("File were selected")]}):(0,oe.jsxs)("span",{children:[l("Drop Your File")," ",re.includes("en")?"Delivery note":"\u0633\u0646\u062f \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645"]})]})]})})]})})})}),(0,oe.jsx)(y.A,{children:(0,oe.jsxs)(I.A,{sx:{display:"flex",flex:1,justifyContent:"center",marginBottom:2},children:[(0,oe.jsx)(s.A,{color:"primary",variant:"contained",onClick:Ua,sx:{textTransform:"capitalize",bgcolor:"gray",ml:"4px",mr:"4px","&:hover":{backgroundColor:"#666",color:"white"}},children:l("Send Invoice Cancel Button")}),(0,oe.jsxs)(I.A,{position:"relative",children:[(0,oe.jsx)(s.A,{color:"primary",disabled:S,variant:"contained",onClick:()=>(()=>{if(""===C)return We(l("Please Enter Invoice Number")),Ue(!0),void qe(500);if(""===q)return We(l("Please Enter Invoice Amount")),Ue(!0),void qe(500);if(""===Le)return We(l("please select the discount rate")),Ue(!0),void qe(500);if(He<Ra)return We("ar"===L.Ay.language?"\u0623\u064a\u0627\u0645 \u0628\u0639\u064a\u062f\u0627 ".concat(Pa," \u064a\u062c\u0628 \u0623\u0644\u0627 \u064a\u0632\u064a\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0639\u0646"):"The invoice date should not be more than ".concat(Pa," days away.")),Ue(!0),void qe(500);if(He>Ba)return We("ar"===L.Ay.language?"\u0644\u064a\u0633 \u0645\u0646 \u0627\u0644\u0645\u0645\u0643\u0646 \u062a\u062d\u062f\u064a\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644\u064a\u0629":"It is not possible to select a future billing date"),Ue(!0),void qe(500);if(0===Se.length)return We(l("Please Upload Invoice")),Ue(!0),void qe(500);if(Se[0].size>5242880)return We(l("The file size should not exceed 5MB")),Ue(!0),void qe(500);if(0===De.length&&"Yes"===fe)return We(re.includes("en")?"Please upload delivery note":"\u064a\u0631\u062c\u0649 \u0631\u0641\u0639 \u0633\u0646\u062f \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645"),Ue(!0),void qe(500);if(De[0].size>5242880)return We(l("The file size should not exceed 5MB")),Ue(!0),void qe(500);const e=W.A.getItem("buyerId"),a={type:W.A.getItem("type"),buyerId:e,loanPeriod:Ne,finAmtRate:Le,invoiceAmount:parseFloat(q.replace(/,/g,""))};P(!0),X(ne(a)).then((e=>{var a,t,n,l,i,o,r,s,d,c,u,p,m,v,x,h,g,y,j,A,b,f,w;1==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.status)?(ra(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.loanAmount),da(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.buyerInt),xa(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.buyerFee),ua(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.buyerIntAmount),ma(null===e||void 0===e||null===(c=e.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.buyerFeeAmount),ga(null===e||void 0===e||null===(p=e.data)||void 0===p||null===(m=p.data)||void 0===m?void 0:m.buyerFeeVat),ja(null===e||void 0===e||null===(v=e.data)||void 0===v||null===(x=v.data)||void 0===x?void 0:x.transactionFeeAmount),ba(null===e||void 0===e||null===(h=e.data)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.transactionFeeVat),wa(null===e||void 0===e||null===(y=e.data)||void 0===y||null===(j=y.data)||void 0===j?void 0:j.IntAndFee),Ia(null===e||void 0===e||null===(A=e.data)||void 0===A||null===(b=A.data)||void 0===b?void 0:b.totalRepayment),Ta(null===e||void 0===e||null===(f=e.data)||void 0===f||null===(w=f.data)||void 0===w?void 0:w.vat),ia(1),P(!1)):(We(null===e||void 0===e?void 0:e.data.message),qe(null===e||void 0===e?void 0:e.data.status),Ue(!0),P(!1))})).catch((e=>{P(!1),We(null===e||void 0===e?void 0:e.data.message),qe(null===e||void 0===e?void 0:e.data.status)}))})(),sx:{textTransform:"capitalize"},children:l("BuyerSoloButton")}),S&&(0,oe.jsx)(me,{size:24,className:"buttonProgress"})]})]})})]}),"1"==la&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(I.A,{sx:{bgcolor:"#37AA57"},children:(0,oe.jsx)(c.A,{className:F.modalTitle,children:l("BuyerSoloUploadInvoice")})}),(0,oe.jsx)(u.A,{children:(0,oe.jsx)(p.A,{id:"alert-dialog-description",children:(0,oe.jsx)(I.A,{sx:{display:"flex",flex:1,justifyContent:"center",marginBottom:2},className:F.Box,p:2,height:"100%",children:(0,oe.jsxs)(m.Ay,{style:{display:"flex",justifyContent:"center",alignItems:"center"},container:!0,spacing:2,children:[(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsxs)(j.A,{className:F.BodyTextLabel,children:[" ",l("Loan Details Loan Amount")]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(oa)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsxs)(j.A,{className:F.BodyTextLabel,children:[l("Invoice Details Loan Interest Amount For Loan Period")," (",sa,"%",")"]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(ca)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabel,children:l("Invoice Details Loan Interest Transaction Fees")})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(ya)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsxs)(j.A,{className:F.BodyTextLabel,children:[l("Invoice Details Loan Interest Transaction VAT")," (",Da,"%",")"]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(Aa)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsxs)(j.A,{className:F.BodyTextLabel,children:[l("Invoice Details Loan Interest Fees From Buyer")," (",va,"%",")"]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(pa)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsxs)(j.A,{className:F.BodyTextLabel,children:["  ",l("Invoice Details Loan Interest Buyer Fees VAT")," (",Da,"%",")"]})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(ha)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabel,children:l("Invoice Details Loan Interest Interest Amount With Fees")})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(fa)})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabel,children:l("Invoice Details Loan Interest Total Repayment Amount")})}),(0,oe.jsx)(m.Ay,{item:!0,xs:6,children:(0,oe.jsx)(j.A,{className:F.BodyTextLabelKey,children:Va(Sa)})})]})})})}),(0,oe.jsx)(y.A,{children:(0,oe.jsxs)(I.A,{sx:{display:"flex",flex:1,justifyContent:"center",marginBottom:2},children:[(0,oe.jsx)(s.A,{color:"primary",variant:"contained",onClick:()=>{ia(0)},sx:{textTransform:"capitalize",bgcolor:"gray",ml:"4px",mr:"4px","&:hover":{backgroundColor:"#666",color:"white"}},children:l("Back")}),(0,oe.jsxs)(I.A,{position:"relative",children:[(0,oe.jsx)(s.A,{color:"primary",disabled:S,variant:"contained",onClick:()=>Ga(),sx:{textTransform:"capitalize"},children:l("confirm")}),S&&(0,oe.jsx)(me,{size:24,className:"buttonProgress"})]})]})})]})]})]})]})}}}]);