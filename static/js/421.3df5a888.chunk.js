"use strict";(self.webpackChunkraqamyah_scm=self.webpackChunkraqamyah_scm||[]).push([[421],{84641:(e,a,s)=>{s.d(a,{OP:()=>i});var t=s(45677),d=s(44781),l=s(55949);const i=e=>async a=>(a(n()),(0,d.a)({method:l.vX.post,url:l.s0.buyerLoansDataDetails,headers:l.b3.headFinancing,data:e}).then((e=>{if(void 0!==e){if(1==e.data.status||-1==e.data.status){let s=void 0!==e.data&&null!==e.data&&0!==Object.keys(e.data).length?e.data:{};a(r(null===s||void 0===s?void 0:s.data))}else a(n());return e}a(n())}))),n=()=>({type:t.pI}),r=e=>({type:t.$s,payload:e})},90802:(e,a,s)=>{s.r(a),s.d(a,{default:()=>E});var t=s(9950),d=s(10300),l=s(46639),i=s(4139),n=s(37598),r=s(63464),o=s(40033),m=s(28170),c=s(14341),x=s(72145),p=s(66059),u=s(88164),y=s(79739),h=s(70146),g=s(86898),A=s(57539),b=s(65257),j=s(111),f=s(84641),v=s(28429),N=s(27987),B=s(45677),L=s(44781),S=s(55949);const T=e=>async a=>(a(w()),(0,L.a)({method:S.vX.post,url:S.s0.buyerLoansDataChanges,headers:S.b3.headFinancing,data:JSON.stringify(e)}).then((e=>{if(void 0!=e){if(1==e.data.status||-1==e.data.status){let s=void 0!=e.data&&null!=e.data&&0!=Object.keys(e.data).length?e.data:{};a(C(s))}else a(R());return e}a(R())}))),w=()=>({type:B.YQ}),C=e=>({type:B.kn,payload:e}),R=e=>({type:B.mK,payload:e}),F=e=>async a=>(a(G()),(0,L.a)({method:S.vX.post,url:S.s0.buyerLoansDataApproved,headers:S.b3.headFinancing,data:e}).then((e=>{if(void 0!==e){if(1==e.data.status||-1==e.data.status){let s=void 0!==e.data&&null!==e.data&&0!==Object.keys(e.data).length?e.data:{};a(I(null===s||void 0===s?void 0:s.data))}else a(G());return e}a(G())}))),G=()=>({type:B.c_}),I=e=>({type:B.uk,payload:e});var k=s(49045),P=s(44414);const D=(0,h.A)(g.A)((()=>({display:"flex",alignItems:"center"}))),H=(0,h.A)("div")((e=>{let{theme:a}=e;return{margin:"30px",[a.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[a.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),W=(0,h.A)("div")((()=>({paddingLeft:"24px",paddingRight:"24px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"}))),K=(0,j.A)((e=>({PageBreadcrumb:{fontFamily:"Ample-Regular",marginBottom:"30px"},PageTitle:{fontFamily:"Ample-Regular",fontSize:"20px",fontWeight:"bold"},TableHeader:{fontFamily:"Ample-Regular",color:"#fff",fontWeight:"bold",fontSize:"16px",backgroundColor:"#1E396C",paddingLeft:0,paddingRight:0},TableCell:{fontFamily:"Ample-Regular",color:"#fff",fontWeight:"bold",fontSize:"14px",textAlign:"center"},TableRow:{fontFamily:"Ample-Regular",color:"#000",fontWeight:"400px",fontSize:"14px",textAlign:"center",textTransform:"none"},StatusApproved:{height:15,width:50,color:"#fff",fontFamily:"Ample-Regular",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",background:"#37A753",boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},StatusPending:{height:15,width:50,color:"#fff",fontFamily:"Ample-Regular",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",background:"#FFAF38",boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},HeadRow:{fontSize:"18px",fontFamily:"Ample-Regular",color:"#ffff !important",textAlign:"center"},HeadGrid:{padding:"10px !important",marginTop:5,marginBottom:5},CardHeadGrid:{marginTop:"5px !important",marginBottom:"5px !important"},CardBodyGrid:{display:"flex"},BodyGrid:{paddingLeft:"25px",paddingRight:"25px",display:"flex"},BodyTextLabel:{fontSize:"16px",fontFamily:"Ample-Regular",fontWeight:"bold"},BodyTextLabelKey:{fontSize:"15px",fontFamily:"Ample-Regular"},GridCard:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",padding:"10px !important",margin:5},ModalTitle:{backgroundColor:"#1E396C",color:"#fff",fontSize:"20px",fontFamily:"Ample-Regular"},ModalContentBox:{paddingTop:"20px",paddingLeft:"20px",paddingRight:"20px"},StatusApproved:{height:15,width:50,color:"#fff",fontFamily:"Ample-Regular",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",background:"#37A753",boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},StatusPending:{height:15,width:50,color:"#fff",fontFamily:"Ample-Regular",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",background:"#FFAF38",boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},StatusRejected:{height:15,width:50,color:"#fff",fontFamily:"Ample-Regular",padding:"4px 10px",borderRadius:"4px",overflow:"hidden",backgroundColor:"#FF3D57",boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},RejectedButton:{backgroundColor:"#FF3D57",color:"#ffff","&:hover":{backgroundColor:"#FF3D57",color:"#ffff"}},SubmitButton:{backgroundColor:"#37A753",color:"#ffff",marginLeft:"50px","&:hover":{backgroundColor:"#37A753",color:"#ffff"}}}))),O=(0,h.A)(l.A)((()=>({position:"absolute",top:"6px",left:"25px"}))),z=(0,h.A)("div")((e=>{let{theme:a}=e;return{"& form":{display:"flex",margin:"auto",flexDirection:"column",width:"fit-content"},"& .formControl":{marginTop:a.spacing(2),minWidth:120},"& .formControlLabel":{marginTop:a.spacing(1)}}}));function E(){const[e,a]=t.useState(!1),[s,l]=t.useState(!0),[h,j]=t.useState("md"),B=K(),L=(0,v.Zp)(),[S,w]=(0,t.useState)(!1),[C,R]=(0,t.useState)(""),[G,I]=(0,t.useState)(""),[E,M]=(0,t.useState)(""),[X,_]=(0,t.useState)(""),[q,Q]=(0,t.useState)(""),[U,$]=(0,t.useState)(""),[J,Y]=(0,t.useState)(""),[Z,V]=(0,t.useState)(!1),[ee,ae]=(0,t.useState)(""),[se,te]=(0,t.useState)(!1),de=(0,d.wA)(),[le,ie]=(0,t.useState)(!1),[ne,re]=(0,t.useState)([]),oe=e=>{Q(e.target.value)},me=e=>{I(e.target.value)},ce=e=>{const a=null===e||void 0===e?void 0:e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:5}),s=null===a||void 0===a?void 0:a.indexOf("."),t=null===a||void 0===a?void 0:a.substring(0,s),d=null===a||void 0===a?void 0:a.substring(s+1);let l=" SAR "+t;return"00"!==d&&(l+="."+(null===d||void 0===d?void 0:d.replace(/0+$/,""))),l};let xe=(0,d.d4)((e=>{var a;return null===(a=e.buyerLoanInterestRateReducer)||void 0===a?void 0:a.loanInterestRateList}));function pe(){a(!1)}(0,t.useEffect)((()=>{w(!0);const e={buyerId:k.A.getItem("buyerId"),type:k.A.getItem("type")};de((0,f.OP)(e)).then((e=>{var a;re(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data),k.A.setItem("loanDataID",e.data.loanDataID)}))}),[]);const ue=()=>{w(!0);const e=k.A.getItem("type"),a=k.A.getItem("buyerId");de(F({buyerId:a,loanDataStatus:"Approved",signedBuyerId:a,type:e})).then((e=>{var a,s;Y(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message),V(!0),ae(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.status),window.location.reload()})).catch((e=>{var a,s;Y(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message),V(!0),ae(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.status)}))};return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(P.Fragment,{children:(null===xe||void 0===xe?void 0:xe.length)>0?null===xe||void 0===xe?void 0:xe.map((t=>(0,P.jsxs)(H,{children:[(0,P.jsx)("div",{className:B.PageBreadcrumb,children:(0,P.jsx)(A.Qp,{className:B.PageBreadcrumb,routeSegments:[{name:"Loan Interest Rate",path:"/dashboard"},{name:"Loan Interest Rate Table"}]})}),(0,P.jsxs)(A.Tn,{children:[(0,P.jsx)(W,{children:(0,P.jsx)(g.A,{ml:"12px",className:B.PageTitleBox,children:(0,P.jsx)(b.L9,{className:B.PageTitle,children:"Loan Interest Rate"})})}),(0,P.jsx)(g.A,{width:"100%",overflow:"auto",children:(0,P.jsxs)(i.Ay,{container:!0,spacing:1,className:B.HeadGrid,children:[(0,P.jsx)(i.Ay,{style:{background:"#1E396C",padding:"5px"},item:!0,xs:12,md:12,children:(0,P.jsx)(b.L9,{className:B.HeadRow,children:"Loan Interest Rate"})}),(0,P.jsxs)(i.Ay,{className:B.CardHeadGrid,container:!0,spacing:2,item:!0,xs:12,md:12,children:[(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Loan Data Id"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.loanDataID})})]}),(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Loan Period"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.loanPeriod})})]})]}),(0,P.jsxs)(i.Ay,{className:B.CardHeadGrid,container:!0,spacing:2,item:!0,xs:12,md:12,children:[(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Interest Rate"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.interestRate})})]}),(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Annual Sales Pos"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:ce(t.anuSalesPos)})})]})]}),(0,P.jsxs)(i.Ay,{className:B.CardHeadGrid,container:!0,spacing:2,item:!0,xs:12,md:12,children:[(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Deduction Status"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:"Approved"===t.deductionStatus?(0,P.jsx)("span",{className:B.StatusApproved,children:"Approved"}):"Pending"===t.deductionStatus?(0,P.jsx)("span",{className:B.StatusPending,children:"Pending"}):(0,P.jsx)("span",{className:B.StatusRejected,children:"Amend"})})})]}),(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Transaction Type"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.transType})})]})]}),(0,P.jsxs)(i.Ay,{className:B.CardHeadGrid,container:!0,spacing:2,item:!0,xs:12,md:12,children:[(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Review"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.review})})]}),(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:6,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabel,children:"Reviewer Type"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:6,sm:6,md:12,children:(0,P.jsx)(b.L9,{className:B.BodyTextLabelKey,children:t.reviewerType})})]})]}),(0,P.jsx)(i.Ay,{style:{marginTop:"20px"},container:!0,spacing:2,item:!0,xs:12,md:12,title:"contained buttons",children:(0,P.jsx)(i.Ay,{className:B.CardHeadGrid,container:!0,spacing:2,item:!0,xs:12,md:12,children:(0,P.jsxs)(i.Ay,{className:B.CardBodyGrid,item:!0,sm:12,xs:12,md:12,children:[(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:12,sm:12,md:4,children:(0,P.jsx)(n.A,{onClick:ue,variant:"contained",color:"primary",className:B.button,children:"Approved"})}),(0,P.jsx)(i.Ay,{className:B.BodyGrid,item:!0,xs:12,sm:12,md:4,children:(0,P.jsx)(n.A,{onClick:()=>{L("/buyer/InterestRateHistory")},variant:"contained",color:"secondary",className:B.RejectedButton,children:"History"})}),(0,P.jsx)(z,{children:(0,P.jsxs)(r.A,{open:e,fullWidth:s,maxWidth:h,onClose:pe,"aria-labelledby":"max-width-dialog-title",children:[(0,P.jsx)(o.A,{className:B.ModalTitle,id:"max-width-dialog-title",children:"Loan Interest Rate"}),(0,P.jsx)(m.A,{children:(0,P.jsxs)(g.A,{className:B.ModalContentBox,children:[(0,P.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(i.Ay,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,P.jsx)(c.A,{sx:{mb:3,width:"100%"},type:"number",name:"loanPeriod",onChange:e=>_(e.target.value),label:"Loan Period"})}),(0,P.jsx)(i.Ay,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,P.jsx)(c.A,{sx:{mb:3,width:"100%"},type:"number",onChange:e=>M(e.target.value),name:"interestRate",label:"Interest Rate"})})]}),(0,P.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(i.Ay,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,P.jsx)(c.A,{sx:{mb:3,width:"100%"},type:"number",onChange:e=>R(e.target.value),name:"anuSalesPos",label:"Annual Sales Pos"})}),(0,P.jsx)(i.Ay,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(p.A,{className:B.textField,id:"demo-simple-select-label",children:"Transaction Type"}),(0,P.jsxs)(u.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"transactionType",value:q,label:"Transaction Type",onChange:oe,children:[(0,P.jsx)(N.A,{className:B.textField,value:"POS",children:"POS"}),(0,P.jsx)(N.A,{className:B.textField,value:"FLAT",children:"FLAT"}),(0,P.jsx)(N.A,{className:B.textField,value:"BULLET",children:"BULLET"})]})]})})]}),(0,P.jsx)(i.Ay,{container:!0,spacing:2,children:(0,P.jsx)(i.Ay,{item:!0,lg:12,md:12,sm:12,xs:12,children:(0,P.jsx)(c.A,{sx:{mb:3,width:"100%"},type:"text",name:"review",onChange:e=>$(e.target.value),multiline:!0,rows:4,label:"Review"})})}),(0,P.jsx)(i.Ay,{container:!0,spacing:2,children:(0,P.jsx)(i.Ay,{item:!0,lg:12,md:12,sm:12,xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(p.A,{className:B.textField,id:"demo-simple-select-label",children:"Status"}),(0,P.jsxs)(u.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:G,name:"deductionStatus",label:"Status",onChange:me,children:[(0,P.jsx)(N.A,{className:B.textField,value:"Approved",children:"Approved"}),(0,P.jsx)(N.A,{className:B.textField,value:"Amend",children:"Amend"})]})]})})})]})}),(0,P.jsx)(y.A,{children:(0,P.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(i.Ay,{item:!0,lg:4,md:4,sm:12,xs:12}),(0,P.jsxs)(i.Ay,{item:!0,lg:4,md:4,sm:12,xs:12,children:[(0,P.jsx)(n.A,{className:B.RejectedButton,onClick:pe,color:"primary",children:"Close"}),(0,P.jsx)(n.A,{className:B.SubmitButton,onClick:()=>(()=>{const e=k.A.getItem("buyerId"),s=k.A.getItem("type"),t=(k.A.getItem("userName"),{annualPOSSales:C,deductionStatus:G,interestRate:E,loanPeriod:X,transactionType:q,reviewerType:"Buyer",review:U,buyerId:e,type:s});ie(!0),te(!1),de(T(t)).then((e=>{var s,t;Y(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message),V(!0),ae(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status),te(!0),window.location.reload(),a(!1)})).catch((e=>{var a,s;te(!1),Y(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message),V(!0),ae(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.status)}))})(),color:"primary",children:"Submit"})]}),(0,P.jsx)(i.Ay,{item:!0,lg:4,md:4,sm:12,xs:12})]})})]})})]})})})]})})]})]}))):(0,P.jsx)(H,{children:(0,P.jsx)(A.Tn,{children:(0,P.jsx)(D,{mb:2,flexWrap:"wrap",children:(0,P.jsx)(g.A,{children:le&&(0,P.jsx)(O,{size:24,className:"buttonProgress"})})})})})})})}}}]);